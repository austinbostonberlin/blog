var _extends=Object.assign||function(d){for(var a=1,b,c;a<arguments.length;a++){b=arguments[a];for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c])}return d},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};!function(b,a){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=a():"function"==typeof define&&define.amd?define(a):b.LazyLoad=a()}(this,function(){"use strict";function w(a,b,e){var c=b._settings;!e&&n(a)||(d(c.callback_enter,a),G.indexOf(a.tagName)>-1&&(F(a,b),i(a,c.class_loading)),M(a,b),D(a),d(c.callback_set,a))}var B={elements_selector:"img",container:document,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",class_loading:"loading",class_loaded:"loaded",class_error:"error",load_delay:0,callback_load:null,callback_error:null,callback_set:null,callback_enter:null,callback_finish:null,to_webp:!1},A=function(a){return _extends({},B,a)},a=function(a,b){return a.getAttribute("data-"+b)},u=function(a,d,b){var c="data-"+d;null!==b?a.setAttribute(c,b):a.removeAttribute(c)},D=function(a){return u(a,"was-processed","true")},n=function(b){return"true"===a(b,"was-processed")},m=function(a,b){return u(a,"ll-timeout",b)},v=function(b){return a(b,"ll-timeout")},K=function(a){return a.filter(function(a){return!n(a)})},I=function(a,b){return a.filter(function(a){return a!==b})},l=function(c,d){var a,b=new c(d);try{a=new CustomEvent("LazyLoad::Initialized",{detail:{instance:b}})}catch(c){(a=document.createEvent("CustomEvent")).initCustomEvent("LazyLoad::Initialized",!1,!1,{instance:b})}window.dispatchEvent(a)},g=function(a,b){return b?a.replace(/\.(jpe?g|png)/gi,".webp"):a},c="undefined"!=typeof window,H=c&&!("onscroll"in window)||/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),x=c&&"IntersectionObserver"in window,q=c&&"classList"in document.createElement("p"),r=c&&function(){var a=document.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))&&0===a.toDataURL("image/webp").indexOf("data:image/webp")}(),s=function(e,f,g,h){for(var c,d=0,i;c=e.children[d];d+=1)"SOURCE"===c.tagName&&(i=a(c,g),b(c,f,i,h))},b=function(b,c,a,d){a&&b.setAttribute(c,g(a,d))},z=function(b,c){var d=r&&c.to_webp,e=a(b,c.data_src),f=a(b,c.data_bg),h,i;e&&(h=g(e,d),b.style.backgroundImage='url("'+h+'")'),f&&(i=g(f,d),b.style.backgroundImage=i)},E={IMG:function(c,d){var e=r&&d.to_webp,g=d.data_srcset,f=c.parentNode,h,i,j;f&&"PICTURE"===f.tagName&&s(f,"srcset",g,e),h=a(c,d.data_sizes),b(c,"sizes",h),i=a(c,g),b(c,"srcset",i,e),j=a(c,d.data_src),b(c,"src",j,e)},IFRAME:function(c,d){var e=a(c,d.data_src);b(c,"src",e)},VIDEO:function(c,e){var d=e.data_src,f=a(c,d);s(c,"src",d),b(c,"src",f),c.load()}},M=function(a,b){var c=b._settings,e=a.tagName,d=E[e];if(d)return d(a,c),b._updateLoadingCount(1),void(b._elements=I(b._elements,a));z(a,c)},i=function(a,b){q?a.classList.add(b):a.className+=(a.className?" ":"")+b},y=function(a,b){q?a.classList.remove(b):a.className=a.className.replace(new RegExp("(^|\\s+)"+b+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")},d=function(a,b){a&&a(b)},f=function(a,b,c){a.addEventListener(b,c)},e=function(a,b,c){a.removeEventListener(b,c)},C=function(a,b,c){f(a,"load",b),f(a,"loadeddata",b),f(a,"error",c)},t=function(a,b,c){e(a,"load",b),e(a,"loadeddata",b),e(a,"error",c)},p=function(h,c,e){var a=e._settings,f=c?a.class_loaded:a.class_error,g=c?a.callback_load:a.callback_error,b=h.target;y(b,a.class_loading),i(b,f),d(g,b),e._updateLoadingCount(-1)},F=function(a,b){var c=function c(e){p(e,!0,b),t(a,c,d)},d=function d(e){p(e,!1,b),t(a,c,d)};C(a,c,d)},G=["IMG","IFRAME","VIDEO"],o=function(a,b,c){w(a,c),b.unobserve(a)},k=function(a){var b=v(a);b&&(clearTimeout(b),m(a,null))},J=function(a,d,c){var e=c._settings.load_delay,b=v(a);b||(b=setTimeout(function(){o(a,d,c),k(a)},e),m(a,b))},j=function(a){return a.isIntersecting||a.intersectionRatio>0},L=function(a){return{root:a.container===document?null:a.container,rootMargin:a.thresholds||a.threshold+"px"}},h=function(a,b){this._settings=A(a),this._setObserver(),this._loadingCount=0,this.update(b)};return h.prototype={_manageIntersection:function(a){var c=this._observer,d=this._settings.load_delay,b=a.target;d?j(a)?J(b,c,this):k(b):j(a)&&o(b,c,this)},_onIntersection:function(a){a.forEach(this._manageIntersection.bind(this))},_setObserver:function(){x&&(this._observer=new IntersectionObserver(this._onIntersection.bind(this),L(this._settings)))},_updateLoadingCount:function(a){this._loadingCount+=a,0===this._elements.length&&0===this._loadingCount&&d(this._settings.callback_finish)},update:function(b){var c=this,a=this._settings,d=b||a.container.querySelectorAll(a.elements_selector);this._elements=K(Array.prototype.slice.call(d)),!H&&this._observer?this._elements.forEach(function(a){c._observer.observe(a)}):this.loadAll()},destroy:function(){var a=this;this._observer&&(this._elements.forEach(function(b){a._observer.unobserve(b)}),this._observer=null),this._elements=null,this._settings=null},load:function(a,b){w(a,this,b)},loadAll:function(){var a=this;this._elements.forEach(function(b){a.load(b)})}},c&&function(b,a){if(a)if(a.length)for(var c,d=0;c=a[d];d+=1)l(b,c);else l(b,a)}(h,window.lazyLoadOptions),h})